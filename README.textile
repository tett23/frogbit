h1. frogbit

アニメをひたすらエンコードしてフロッグしたい！！

h2. 環境構築

* ffmpeg

オプションとか
<pre>./configure --enable-gpl --enable-shared --enable-nonfree --enable-libfaac --enable-libmp3lame --enable-libvorbis --enable-libx264 --enable-libxvid --enable-zlib</pre>

* DB

MySQLを使う。
必要なDBは、

* frogbit_development
* frogbit_production

テーブルの作成と更新は、
<pre>rake db:upgrade</pre>
また、
<pre>rake db:migrate</pre>
を実行するとdrop tableを実行してから作成し直す

もう一度環境構築するのに参考にしそうなやつ

* http://linux.justinhartman.com/FFmpeg,_FFmpeg-PHP,_Lame,_Libogg,_Libvorbis,_FLVtool2,_Mplayer,_Mencoder,_AMR_Installation
* http://imoimo2010.blogspot.jp/2012/02/ffmpegdebian60.html

h2. 実行方法

<pre>rake
rake encode:preprocess</pre>
でTSファイルやメタデータを読み込みDBに格納する。
ふたつのコマンドは等価。

<pre>rake encode:process_queue[count]</pre>
で指定した数だけキューを処理（エンコード）する。
引数なしの場合はひとつ処理する。
